datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String    @id @default(uuid()) @map("_id")
  name      String
  email     String    @unique
  password  String
  votes     votedPoll[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now())
}

model Poll {
  id            String    @id @default(uuid()) @map("_id")
  title         String
  description   String
  visibility    String
  status        String
  startAt       DateTime
  endAt         DateTime
  expectedVotes Int
  categories    String[]
  options       Option[]
  votes         votedOption[]
  votesCount    Int       @default(0)
  createdBy     CreatedBy
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @default(now())
}

type Option {
  id String
  text String
}

type CreatedBy {
  id String
  name String
}

type votedPoll {
  poll_id String
  option_id String
  votedAt DateTime
}

type votedOption {
  user_id String
  option_id String
  votedAt DateTime
}

